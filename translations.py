# translations.py
# A simple, pure-Python translation system.

LANG = 'en'
LANG_NAMES = {
    "Arabic": {"ru": "Арабский", "hu": "Arab"}, "Chinese (Mandarin)": {"ru": "Китайский (Мандарин)", "hu": "Kínai (Mandarin)"},
    "Dutch": {"ru": "Голландский", "hu": "Holland"}, "English": {"ru": "Английский", "hu": "Angol"},
    "Finnish": {"ru": "Финский", "hu": "Finn"}, "French": {"ru": "Французский", "hu": "Francia"},
    "German": {"ru": "Немецкий", "hu": "Német"}, "Hungarian": {"ru": "Венгерский", "hu": "Magyar"},
    "Italian": {"ru": "Итальянский", "hu": "Olasz"}, "Japanese": {"ru": "Японский", "hu": "Japán"},
    "Norwegian": {"ru": "Норвежский", "hu": "Norvég"}, "Polish": {"ru": "Польский", "hu": "Lengyel"},
    "Portuguese": {"ru": "Португальский", "hu": "Portugál"}, "Russian": {"ru": "Русский", "hu": "Orosz"},
    "Spanish": {"ru": "Испанский", "hu": "Spanyol"}, "Swedish": {"ru": "Шведский", "hu": "Svéd"},
    "Turkish": {"ru": "Турецкий", "hu": "Török"},
}
TRANSLATIONS = {
    "&Add to Database...": {"ru": "&Добавить в словарь...","hu": "&Hozzáadás a szótárhoz..."},
    "&Close": {"ru": "&Закрыть","hu": "&Bezárás"},
    "&Create New Dictionary...": {"ru": "&Создать словарь...","hu": "&Új szótár létrehozása..."},
    "&Database": {"ru": "&Словари","hu": "&Szótárak"},
    "&Delete Word": {"ru": "&Удалить","hu": "&Törlés"},
    "&Dictionary": {"ru": "&Словарь","hu": "&Szótár"},
    "&Edit Word...": {"ru": "&Редактировать...","hu": "&Szerkesztés..."},
    "&Exit": {"ru": "&Выход","hu": "&Kilépés"},
    "&Export Database...": {"ru": "&Экспортировать базу...","hu": "&Adatbázis exportálása..."},
    "&File": {"ru": "&Файл","hu": "&Fájl"},
    "&Import Database...": {"ru": "&Импортировать базу...","hu": "&Adatbázis importálása..."},
    "&Learn": {"ru": "&Обучение","hu": "&Tanulás"},
    "&Learned Word:": {"ru": "&Изучаемое слово:","hu": "&Tanult szó:"},
    "&Native Word:": {"ru": "&Слово на родном языке:","hu": "&Anyanyelvi szó:"},
    "&Notes:": {"ru": "&Заметки:","hu": "&Jegyzetek:"},
    "&Online Translator...": {"ru": "&Онлайн-переводчик...","hu": "&Online fordító..."},
    "&Practice Quiz (Random)": {"ru": "&Случайный тест","hu": "&Gyakorló teszt"},
    "&Pronunciation Practice": {"ru": "&Практика произношения","hu": "&Kiejtés gyakorlása"},
    "&Review Due Words": {"ru": "&Повторение","hu": "&Kikérdezés"},
    "&Settings": {"ru": "&Настройки","hu": "&Beállítások"},
    "&Start Session": {"ru": "&Начать","hu": "&Indítás"},
    "&View/Edit Dictionaries": {"ru": "&Мои словари","hu": "&Szótáraim"},
    "&Word to Translate": {"ru": "&Слово для перевода","hu": "&Fordítandó szó"},
    "A dictionary named '{name}' already exists.": {"ru": "Словарь с названием «{name}» уже существует.","hu": "Már létezik '{name}' nevű szótár."},
    "API Error: {details}": {"ru": "Ошибка API: {details}","hu": "API hiba: {details}"},
    "API Keys": {"ru": "Ключи API", "hu": "API kulcsok"}, # NEW
    "Add New Word": {"ru": "Добавить новое слово","hu": "Új szó hozzáadása"},
    "Add Word...": {"ru": "Добавить слово...","hu": "Szó hozzáadása..."},
    "All words for this session have been reviewed!": {"ru": "Все слова на эту сессию повторены!","hu": "Minden szó ki lett kérdezve ebből a körből!"},
    "An error occurred during export:\n{error}": {"ru": "Произошла ошибка при экспорте:\n{error}","hu": "Hiba történt exportálás közben:\n{error}"},
    "An error occurred during import:\n{error}": {"ru": "Произошла ошибка при импорте:\n{error}","hu": "Hiba történt importálás közben:\n{error}"},
    "Answer": {"ru": "Ответ","hu": "Válasz"},
    "Application Language": {"ru": "Язык интерфейса","hu": "Alkalmazás nyelve"},
    "Are you sure you want to permanently delete the entire dictionary '{name}' and all the words in it?": {"ru": "Вы уверены, что хотите навсегда удалить словарь «{name}» и все слова в нем?","hu": "Biztosan véglegesen törli a(z) '{name}' szótárat és az összes benne lévő szót?"},
    "Are you sure you want to delete the word '{word}'?": {"ru": "Вы уверены, что хотите удалить слово «{word}»?","hu": "Biztosan törli a(z) '{word}' szót?"},
    "Audio Cache": {"ru": "Аудио кэш","hu": "Hang gyorsítótár"},
    "CSV files (*.csv)|*.csv": {"ru": "Файлы CSV (*.csv)|*.csv","hu": "CSV fájlok (*.csv)|*.csv"},
    "Card {current} of {total}": {"ru": "Карточка {current} из {total}","hu": "{current} / {total} kártya"},
    "Change &Settings...": {"ru": "&Изменить настройки...","hu": "&Beállítások módosítása..."},
    "Check Answer": {"ru": "Проверить","hu": "Ellenőrzés"},
    "Choose a dictionary to save to:": {"ru": "Выберите словарь для сохранения:","hu": "Melyik szótárba mentsem?"},
    "Close": {"ru": "Закрыть","hu": "Bezárás"},
    "Confirm Delete": {"ru": "Подтверждение удаления","hu": "Törlés megerősítése"},
    "Confirm Delete Dictionary": {"ru": "Подтверждение удаления словаря","hu": "Szótár törlésének megerősítése"},
    "Correct!": {"ru": "Правильно!","hu": "Helyes!"},
    "Create Dictionary": {"ru": "Создать словарь","hu": "Szótár létrehozása"},
    "DeepL API Key (Free or Pro):": {"ru": "Ключ API DeepL (Free или Pro):", "hu": "DeepL API kulcs (Free vagy Pro):"}, # NEW
    "DeepL requires an API key. Please add it in the Settings menu.": {"ru": "DeepL требует ключ API. Пожалуйста, добавьте его в меню настроек.", "hu": "A DeepL-hez API kulcs szükséges. Kérlek, add meg a Beállítások menüben."}, # NEW
    "Delete This Dictionary": {"ru": "Удалить словарь","hu": "Szótár törlése"},
    "Dictionary:": {"ru": "Словарь:","hu": "Szótár:"},
    "Easy": {"ru": "Легко","hu": "Könnyű"},
    "Edit Word": {"ru": "Редактировать слово","hu": "Szó szerkesztése"},
    "Edit Word...": {"ru": "Редактировать...","hu": "Szerkesztés..."},
    "Empty": {"ru": "Пусто","hu": "Üres"},
    "End Quiz Early": {"ru": "Завершить тест","hu": "Teszt befejezése"},
    "End Session": {"ru": "Завершить","hu": "Befejezés"},
    "Enter the name for the new dictionary:": {"ru": "Введите название нового словаря:","hu": "Add meg az új szótár nevét:"},
    "Error": {"ru": "Ошибка","hu": "Hiba"},
    "Error: Language not configured.": {"ru": "Ошибка: Язык не настроен.","hu": "Hiba: A nyelv nincs beállítva."},
    "Export Complete": {"ru": "Экспорт завершен","hu": "Exportálás kész"},
    "Export Error": {"ru": "Ошибка экспорта","hu": "Exportálási hiba"},
    "F&lashcards": {"ru": "К&арточки","hu": "Tanuló&kártyák"},
    "Finished": {"ru": "Готово","hu": "Kész"},
    "Flashcard session complete!": {"ru": "Сессия с карточками завершена!","hu": "A kártyacsomag végére értél!"},
    "Flashcards": {"ru": "Карточки","hu": "Tanulókártyák"},
    "Forgot (review in 1 day)": {"ru": "Не помню (через 1 день)","hu": "Elfelejtettem (1 nap múlva)"},
    "Found {count} translation matches for '{word}':\n": {"ru": "Найдено {count} совпадений для «{word}»:\n","hu": "{count} fordítási találat a(z) '{word}' szóra:\n"},
    "From:": {"ru": "С языка:","hu": "Erről:"},
    "Good": {"ru": "Хорошо","hu": "Jó"},
    "Grade Yourself": {"ru": "Оцените себя","hu": "Hogyan ment?"},
    "Hard": {"ru": "Трудно","hu": "Nehéz"},
    "How well did you know it?": {"ru": "Насколько хорошо вы это знали?","hu": "Mennyire tudtad?"},
    "Import Complete": {"ru": "Импорт завершен","hu": "Importálás kész"},
    "Import Error": {"ru": "Ошибка импорта","hu": "Importálási hiba"},
    "Incorrect.\nThe correct answer is: {answer}": {"ru": "Неправильно.\nПравильный ответ: {answer}","hu": "Helytelen.\nA helyes válasz: {answer}"},
    "Input Error": {"ru": "Ошибка ввода","hu": "Bemeneti hiba"},
    "Input Required": {"ru": "Требуется ввод","hu": "Írj be valamit"},
    "Initial quiz complete. Now let's retry the {count} words you missed.": {"ru": "Первый этап завершен. Теперь повторим {count} слов, в которых вы ошиблись.","hu": "Az első kör kész. Most jöjjön az a {count} szó, amit elrontottál."},
    "Keep audio files for faster loading": {"ru": "Сохранять аудиофайлы в кэше","hu": "Hangfájlok megőrzése a gyorsítótárban"},
    "Language I'm Learning:": {"ru": "Я изучаю:","hu": "Tanult nyelv:"},
    "Loading...": {"ru": "Загрузка...","hu": "Töltés..."},
    "Manage your dictionaries.": {"ru": "Управление словарями.","hu": "Szótárak kezelése."},
    "My Languages": {"ru": "Мои языки","hu": "Nyelveim"},
    "My Native Language:": {"ru": "Мой родной язык:","hu": "Anyanyelvem:"},
    "Native and Learned fields cannot be empty.": {"ru": "Поля для слов не могут быть пустыми.","hu": "A szavak mezői nem lehetnek üresek."},
    "No Dictionaries Found": {"ru": "Словари не найдены","hu": "Nincsenek szótárak"},
    "No words are due for review today. Great job!": {"ru": "На сегодня нет слов для повторения. Отлично!","hu": "Mára nincs esedékes szó. Szép munka!"},
    "Not enough words in database for a quiz.": {"ru": "В базе недостаточно слов для теста.","hu": "Nincs elég szó az adatbázisban a teszthez."},
    "Online &Tools": {"ru": "Онлайн-&инструменты","hu": "Online &eszközök"},
    "Open Database Import File": {"ru": "Открыть файл импорта","hu": "Importfájl megnyitása"},
    "Perfect!": {"ru": "Отлично!","hu": "Tökéletes!"},
    "Please enter some text to speak.": {"ru": "Пожалуйста, введите текст для озвучивания.","hu": "Kérlek, írj be szöveget a felolvasáshoz."},
    "Practice Pronunciation in {lang}": {"ru": "Практика произношения ({lang})","hu": "Kiejtés gyakorlása ({lang})"},
    "Quiz Empty": {"ru": "Тест пуст","hu": "A teszt üres"},
    "Quiz Finished": {"ru": "Тест окончен","hu": "Teszt befejezve"},
    "Quiz complete! You got all 20 words correct!": {"ru": "Тест завершен! Вы ответили правильно на все 20 слов!","hu": "A teszt kész! Mind a 20 szót helyesen tudtad!"},
    "Quiz - Retrying Incorrect Words": {"ru": "Тест - Работа над ошибками","hu": "Teszt - Hibás szavak újratesztelése"},
    "Requires restart to take full effect.": {"ru": "Для применения необходим перезапуск.","hu": "Újraindítás szükséges a beállítások érvényesítéséhez."},
    "Restart Now?": {"ru": "Перезапустить сейчас?","hu": "Újraindítás most?"},
    "Restart Recommended": {"ru": "Рекомендуется перезапуск","hu": "Újraindítás javasolt"},
    "Result": {"ru": "Результат","hu": "Eredmény"},
    "Retry Phase": {"ru": "Работа над ошибками","hu": "Javító kör"},
    "Retry phase complete! Well done.": {"ru": "Работа над ошибками завершена! Молодец.","hu": "A javító kör kész! Szép munka."},
    "Review Complete": {"ru": "Повторение завершено","hu": "Kikérdezés kész"},
    "Save Database Export": {"ru": "Сохранить экспорт","hu": "Exportálás mentése"},
    "Select Dictionary": {"ru": "Выбор словаря","hu": "Szótár kiválasztása"},
    "Settings": {"ru": "Настройки", "hu": "Beállítások"}, # NEW - Removed ampersand for dialog title
    "Settings have been saved. A restart is required to apply all changes.\n\nRestart now?": {"ru": "Настройки сохранены. Для применения всех изменений требуется перезапуск.\n\nПерезапустить сейчас?","hu": "A beállítások mentve. A változtatások érvényesítéséhez újraindítás szükséges.\n\nÚjraindítja most?"},
    "Show Answer": {"ru": "Показать ответ","hu": "Válasz mutatása"},
    "Speak": {"ru": "Озвучить","hu": "Kiejtés"},
    "Speak Learned Word": {"ru": "Озвучить слово","hu": "Szó kiejtése"},
    "Speak Text": {"ru": "Озвучить текст","hu": "Szöveg felolvasása"},
    "Speak Translation": {"ru": "Озвучить перевод","hu": "Fordítás kiejtése"},
    "Successfully exported {count} words.": {"ru": "Успешно экспортировано {count} слов.","hu": "Sikeresen exportálva: {count} szó."},
    "Successfully imported {count} words.": {"ru": "Успешно импортировано {count} слов.","hu": "Sikeresen importálva: {count} szó."},
    "The answer is:\n\n{answer}": {"ru": "Ответ:\n\n{answer}","hu": "A helyes válasz:\n\n{answer}"},
    "To:": {"ru": "На язык:","hu": "Erre:"},
    "Translate": {"ru": "Перевести","hu": "Fordítás"},
    "Translate the following:": {"ru": "Переведите:","hu": "Fordítsd le a következőt:"},
    "Translating '{word}' from {source} to {target}...": {"ru": "Перевод «{word}» с {source} на {target}...","hu": "Fordítás: '{word}' ({source} -> {target})..."},
    "Translating {word}...": {"ru": "Перевод {word}...","hu": "Fordítás: {word}..." },
    "Translation complete.": {"ru": "Перевод завершен.","hu": "Fordítás kész."},
    "You must create at least one dictionary before adding words.": {"ru": "Сначала создайте хотя бы один словарь.","hu": "Mielőtt szavakat adnál hozzá, hozz létre egy szótárat."}
}

def set_language(lang_code='en'):
    global LANG
    LANG = lang_code

def _(text):
    return TRANSLATIONS.get(text, {}).get(LANG, text)

def get_translated_lang_name(english_name):
    return LANG_NAMES.get(english_name, {}).get(LANG, english_name)